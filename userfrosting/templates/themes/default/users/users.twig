{% extends "layouts/layout-dashboard.twig" %}
{% set page_group = "user" %}

{# Set page properties (page.*) here. #}
{% block page %}
    {# By putting this in a special block, we ensure that it will be set AFTER the default values are set in the parent template, 
    but BEFORE the page itself is rendered. #}    
    {% set page = page | merge({
        "title"       : box_title,
        "description" : "A listing of the users for your site.  Provides management tools including the ability to edit user details, manually activate users, enable/disable users, and more."
    }) %}
    {{ parent() }}
{% endblock %}

{% block content %}
    
    <div class="content-page">
        <!-- Start content -->
        <div class="content">
            <div class="container">
                <p>{{user.sign_up_time | date("l")}}</p>
                <div class="panel">
                    <!--start header of panel-->
                    <div class="panel-heading"> 
                        <i class="fa fa-users" aria-hidden="true"></i> 
                        {{box_title}}
                    <div class='pull-right'>
                        <button id="table-users-download" 
                                class="btn btn-sm btn-default"
                                style="background-color:#fff !important;     color: rgba(0, 0, 0, 0.64) !important;">
                            Download CSV
                        </button>
                    </div>
                    </div>
                    <!--end header of panel-->

                    
                    <!--start body of panel-->
                    <div class="panel-body" >
                        <div class="table-responsive">
                            <!--<table class="table table-striped table-bordered " id="datatable-editable">-->
                            <table id="table-users" class="tablesorter table table-bordered table-hover table-striped" data-sortlist="[[0, 0]]">
                                <thead>
                                    <tr>
                                        <th class="sorter-metatext" data-column-name="user_name">User/Info  <i class="fa fa-sort"></i></th>
                                        <th class="sorter-metanum" data-column-name="sign_up_time">Registered Since <i class="fa fa-sort"></i></th>
                                        <th class="sorter-metanum" data-column-name="last_sign_in_time">Last Sign-in <i class="fa fa-sort"></i></th>
                                        <th data-column-name="flag_enabled">Status/Actions <i class="fa fa-sort"></i></th>
                                    </tr>
                                </thead>
                                
            <tbody> 
                <tr>
                    <td data-text="{{user.user_name}}">
                        <strong>
                            <a href="{{site.uri.public}}/users/u/{{user.id}}">{{user.user_name}} ({{user.display_name}})
                            </a>
                        </strong>
                        <div>
                            <i>{{user.title}}</i>
                        </div>
                        <div>
                            <i class="fa fa-envelope"></i> <a href="mailto:{{user.email}}">{{user.email}}</a>
                        </div>
                        <!--<label>hayattalaat<b>&nbsp;(</b><span>name</span><b>)</b></label><br>
                        <i>New User</i><br>
                        <span class="mail"><i class="glyphicon glyphicon-envelope"></i> &nbsp;Hayattalaat@gmail.com</span>-->
                    </td>
                    {% if user.sign_up_time %}
                    <td data-num="{{user.sign_up_time | date('U')}}">
                        {{user.sign_up_time | date("l")}}<br>{{user.sign_up_time | date("M j, Y g:i a")}}
                        <!--<span>Day</span><br>
                        <span>date and time</span>-->
                    </td>
                    {% else %}
                    <td data-num="0">
                            <i>Unknown</i>
                    </td>
                    {% endif %}  

                    {% if user.last_sign_in_time %}
                    <td data-num="{{user.last_sign_in_time | date('U')}}">
                        {{user.last_sign_in_time | date("l")}}<br>{{user.last_sign_in_time | date("M j, Y g:i a")}}
                    </td>
                    {% else %}
                    <td data-num="0">
                            <i>Brand new!</i>
                    </td>
                    {% endif %}

                    <td class="actions">
                        <div class="dropdown">
                          <button class="btn btn-primary waves-effect waves-light dropdown-toggle" type="button" data-toggle="dropdown">Active
                          <span class="caret waves-effect waves-light"></span></button>
                          <ul class="dropdown-menu">
                            <li><a href="#" data-toggle="modal" data-target="#edit-user"><i class="fa fa-pencil-square-o" aria-hidden="true"></i> Edit user</a></li>
                            <li><a href="#" data-toggle='modal' data-target='#change-pass' ><i class="fa fa-key" aria-hidden="true"></i> Change Password</a></li>
                            <li><a href="#"><i class="fa fa-minus-circle" aria-hidden="true"></i> Disable User</a></li>
                            <li><a href="#" data-toggle='modal' data-target='#delete-user'><i class="fa fa-trash" aria-hidden="true"></i> Delete User</a></li>
                          </ul>
                        </div>
                    </td>
                    <!--<td>
                        <div class="btn-group">
                            {% if user.flag_enabled == 0 %}
                                <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                                    Disabled
                                    <span class="caret"></span>
                                </button>
                            {% elseif user.flag_verified == 0 %}
                                <button type="button" class="btn btn-warning dropdown-toggle" data-toggle="dropdown">
                                    Unactivated
                                    <span class="caret"></span>
                                </button>            
                            {% else %}
                                <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
                                    Active
                                    <span class="caret"></span>
                                </button>            
                            {% endif %}
                            <ul class="dropdown-menu" role="menu">
                                {% if user.flag_verified == 0 %}
                                <li>
                                    <a href="#" data-id="{{user.id}}" class="js-user-activate">
                                    <i class="fa fa-bolt"></i> Activate user
                                    </a>
                                </li>
                                {% endif %}
                                <li>
                                    <a href="#" data-id="{{user.id}}" class="js-user-edit" data-target="#dialog-user-edit" data-toggle="modal">
                                    <i class="fa fa-edit"></i> Edit user
                                    </a>
                                </li>
                                <li>
                                    <a href="#" data-id="{{user.id}}" class="js-user-password" data-target="#dialog-user-password" data-toggle="modal">
                                    <i class="fa fa-key"></i> Change password
                                    </a>
                                </li>
                                <li>
                                {% if user.flag_enabled == 1 %}
                                    <a href="#" data-id="{{user.id}}" class="js-user-disable">
                                    <i class="fa fa-minus-circle"></i> Disable user
                                    </a>
                                {% else %}
                                    <a href="#" data-id="{{user.id}}" class="js-user-enable">
                                    <i class="fa fa-plus-circle"></i> Enable user
                                    </a> 
                                {% endif %}
                                </li>
                                <li>
                                    <a href="#" data-id="{{user.id}}" class="js-user-delete" data-user_name="{{user.user_name}}" data-target="#dialog-user-delete" data-toggle="modal">
                                    <i class="fa fa-trash-o"></i> Delete user</a>
                                </li>
                            </ul>
                        </div>
                    </td>-->

                </tr>                               
            </tbody>
                                

            <tbody>
            {# If we are not using server-side pagination, then just render all results immediately #}
            {% if not paginate_server_side %}
                {% for user in users %}

                <tr>
                    <td data-text="{{user.user_name}}">
                        <strong>
                            <a href="{{site.uri.public}}/users/u/{{user.id}}">{{user.user_name}} ({{user.display_name}})
                            </a>
                        </strong>
                        <div>
                            <i>{{user.title}}</i>
                        </div>
                        <div>
                            <i class="fa fa-envelope"></i> <a href="mailto:{{user.email}}">{{user.email}}</a>
                        </div>
                        <!--<label>hayattalaat<b>&nbsp;(</b><span>name</span><b>)</b></label><br>
                        <i>New User</i><br>
                        <span class="mail"><i class="glyphicon glyphicon-envelope"></i> &nbsp;Hayattalaat@gmail.com</span>-->
                    </td>
                    {% if user.sign_up_time %}
                    <td data-num="{{user.sign_up_time | date('U')}}">
                        {{user.sign_up_time | date("l")}}<br>{{user.sign_up_time | date("M j, Y g:i a")}}
                        <!--<span>Day</span><br>
                        <span>date and time</span>-->
                    </td>
                    {% else %}
                    <td data-num="0">
                            <i>Unknown</i>
                    </td>
                    {% endif %}  

                    {% if user.last_sign_in_time %}
                    <td data-num="{{user.last_sign_in_time | date('U')}}">
                        {{user.last_sign_in_time | date("l")}}<br>{{user.last_sign_in_time | date("M j, Y g:i a")}}
                    </td>
                    {% else %}
                    <td data-num="0">
                            <i>Brand new!</i>
                    </td>
                    {% endif %}

                    <!--<td class="actions">
                        <div class="dropdown">
                          <button class="btn btn-primary waves-effect waves-light dropdown-toggle" type="button" data-toggle="dropdown">Active
                          <span class="caret waves-effect waves-light"></span></button>
                          <ul class="dropdown-menu">
                            <li><a href="#" data-toggle="modal" data-target="#edit-user"><i class="fa fa-pencil-square-o" aria-hidden="true"></i> Edit user</a></li>
                            <li><a href="#" data-toggle='modal' data-target='#change-pass' ><i class="fa fa-key" aria-hidden="true"></i> Change Password</a></li>
                            <li><a href="#"><i class="fa fa-minus-circle" aria-hidden="true"></i> Disable User</a></li>
                            <li><a href="#" data-toggle='modal' data-target='#delete-user'><i class="fa fa-trash" aria-hidden="true"></i> Delete User</a></li>
                          </ul>
                        </div>
                    </td>-->
                    <td>
                        <div class="btn-group">
                            {% if user.flag_enabled == 0 %}
                                <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                                    Disabled
                                    <span class="caret"></span>
                                </button>
                            {% elseif user.flag_verified == 0 %}
                                <button type="button" class="btn btn-warning dropdown-toggle" data-toggle="dropdown">
                                    Unactivated
                                    <span class="caret"></span>
                                </button>            
                            {% else %}
                                <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
                                    Active
                                    <span class="caret"></span>
                                </button>            
                            {% endif %}
                            <ul class="dropdown-menu" role="menu">
                                {% if user.flag_verified == 0 %}
                                <li>
                                    <a href="#" data-id="{{user.id}}" class="js-user-activate">
                                    <i class="fa fa-bolt"></i> Activate user
                                    </a>
                                </li>
                                {% endif %}
                                <li>
                                    <a href="#" data-id="{{user.id}}" class="js-user-edit" data-target="#dialog-user-edit" data-toggle="modal">
                                    <i class="fa fa-edit"></i> Edit user
                                    </a>
                                </li>
                                <li>
                                    <a href="#" data-id="{{user.id}}" class="js-user-password" data-target="#dialog-user-password" data-toggle="modal">
                                    <i class="fa fa-key"></i> Change password
                                    </a>
                                </li>
                                <li>
                                {% if user.flag_enabled == 1 %}
                                    <a href="#" data-id="{{user.id}}" class="js-user-disable">
                                    <i class="fa fa-minus-circle"></i> Disable user
                                    </a>
                                {% else %}
                                    <a href="#" data-id="{{user.id}}" class="js-user-enable">
                                    <i class="fa fa-plus-circle"></i> Enable user
                                    </a> 
                                {% endif %}
                                </li>
                                <li>
                                    <a href="#" data-id="{{user.id}}" class="js-user-delete" data-user_name="{{user.user_name}}" data-target="#dialog-user-delete" data-toggle="modal">
                                    <i class="fa fa-trash-o"></i> Delete user</a>
                                </li>
                            </ul>
                        </div>
                    </td>

                </tr>

                {% endfor %}
            {% endif %}
            </tbody>


                            </table>
                            
                            {% include 'components/common/table-tablesorter-default.twig' with {'pager_id' : 'table-users-pager'} %}
                             <!--********************/start edit user/**********************-->
                      <form action="#" data-parsley-validate novalidate>
                            <div class="modal fade" id="edit-user" role="dialog">
                                <div class="modal-dialog modal-lg">
                                  <div class="modal-content">
                                    <div class="modal-header">
                                      <button type="button" class="close" data-dismiss="modal">&times;</button>
                                      <h3 class="modal-title">Edit User</h3>
                                    </div>
                                      <div class="row">
                                    <div class="modal-body col-sm-12">
                                        <div class="row">
                                        <div class="col-sm-12 col-xs-12 col-lg-6 col-md-6">
                                        <label class="col-sm-12 input-title">User Name</label>
                                        <div class="input-group col-sm-12">
                                            <span class="input-group-addon "><i class="glyphicon glyphicon-edit"></i></span>
                                            <input id="userName" type="text"  class="form-control col-sm-5" name="userName" value="hayat" disabled>
                                          </div>
                                            </div>
                                        <div class="col-sm-12 col-xs-12 col-lg-6 col-md-6">
                                        <label class="col-xs-12 input-title">Display Name</label>
                                        <div class="input-group col-sm-12 col-xs-12 col-lg-12 ">
                                            <span class="input-group-addon" style="height:38px;"><i class="glyphicon glyphicon-edit"></i></span>
                                            <input id="displayname" type="text" parsley-trigger="change" required class="form-control" name="displayname" placeholder="Please enter the display name">
                                          </div>
                                            </div>
                                            </div>
                                        <div class="row">
                                        <div class="col-sm-12 col-xs-12 col-lg-6 col-md-6">
                                        <label class="col-sm-12 input-title">Email</label>
                                        <div class="input-group col-sm-12">
                                            <span class="input-group-addon" ><i class="glyphicon glyphicon-envelope"></i></span>
                                            <input type="email" name="email" parsley-trigger="change" required  class="form-control" id="emailAddress">
                                          </div>
                                            </div>
                                        <div class="col-sm-12 col-xs-12 col-lg-6 col-md-6">
                                        <label class="col-sm-12 input-title">Title</label>
                                        <div class="input-group col-sm-12">
                                            <span class="input-group-addon"><i class="glyphicon glyphicon-edit"></i></span>
                                            <input id="Title" type="text" parsley-trigger="change" required class="form-control" name="Title" value="tst" >
                                          </div>
                                            </div>
                                            </div>
                                         <div class='col-sm-12 col-xs-12 col-lg-6 col-md-6'>
                                             <label class="col-sm-12 input-title">Last Sign-in</label>
                                            <div class="form-group col-sm-12 ">
                                                <div class='input-group date' id='datetimepicker1'>
                                                    <span class="input-group-addon">
                                                        <span class="glyphicon glyphicon-calendar"></span>
                                                    </span>
                                                    <input type='text' class="form-control" value="day, time and date" disabled />
                                                </div>
                                            </div>
                                        </div>
                                         <div class='col-sm-12 col-xs-12 col-lg-6 col-md-6'>
                                             <label class="col-sm-12 input-title">Rigestered Since</label>
                                            <div class="form-group col-sm-12">
                                                <div class='input-group date' id='datetimepicker2'>
                                                    <span class="input-group-addon">
                                                        <span class="glyphicon glyphicon-calendar"></span>
                                                    </span>
                                                    <input type='text' class="form-control" value="day, time and date" disabled />
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                        <div class="col-sm-12 col-xs-12 col-lg-6 col-md-6">
                                            <label class="col-sm-12 input-title">Locale</label>
                                            <div class="form-group col-sm-12 ">
                                                <div class='input-group'>
                                               <span class="input-group-addon">
                                                        <span class="fa fa-map"></span>
                                                    </span>
                                                <select class="form-control" id="exampleSelect1">
                                                  <option>en_us</option>
                                                  <option>2</option>
                                                  <option>3</option>
                                                  <option>4</option>
                                                  <option>5</option>
                                                </select>
                                              </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-xs-12 col-lg-6 col-md-6">
                                            <label class="gro col-sm-12 input-title">Groups</label>
                                                    <ul class="list-group col-sm-12 col-xs-12">
                                                      <li class="list-group-item col-sm-12 col-xs-12">
                                                          <span class="col-sm-8 col-xs-8">User</span>
                                                          <div>
                                                          <input type="checkbox" class=" col-sm-2 col-xs-2 user" data-plugin="switchery" data-color="#5d9cec" data-size="small" data-secondary-color="#ED5565" />
                                                          <span class="glyphicon glyphicon-home check-user" ></span>
                                                        </div>
                                                      </li>
                                                      <li class="list-group-item col-sm-12 col-xs-12">
                                                          <span class="col-sm-8 col-xs-8">Adminstritor</span>
                                                          <input type="checkbox" class=" col-sm-2 col-xs-2 admin" data-plugin="switchery" data-color="#5d9cec" data-size="small" data-secondary-color="#ED5565" />
                                                          <span class="glyphicon glyphicon-home check-admin" ></span>
                                                       </li>
                                                      <li class="list-group-item col-sm-12 col-xs-12">
                                                          <span class="col-sm-8 col-xs-8">Zerglings</span>
                                                          <input type="checkbox" class=" col-sm-2 col-xs-2 zerg" data-plugin="switchery" data-color="#5d9cec" data-size="small" data-secondary-color="#ED5565" />
                                                          <span class="glyphicon glyphicon-home check-zerg" ></span>
                                                        </li>
                                                    </ul>
                                        </div>
                                    </div>
                                      </div>
                                  </div>
                                      <div class="row">
                                        <div class="col-xs-6 form-group m-b-0">
                                          <button type="submit" class="create btn btn-default waves-effect waves-light">Create user</button>
                                          </div>
                                          <div class="col-xs-6">
                                            <a data-dismiss="modal" class="cancel">Cancel</a>
                                          </div>
                                      </div>
                                </div>
                              </div>
                    </div>
                        </form>
                    <!--/********************end edit user**********************/-->
                    <!--/********************change password**********************/-->
                             <div class="modal fade" id="change-pass" role="dialog">
                                <div class="modal-dialog modal-md">
                                  <div class="modal-content">
                                    <div class="modal-header">
                                      <button type="button" class="close" data-dismiss="modal">&times;</button>
                                      <h3 class="modal-title">Change User Password</h3>
                                    </div>
                                    <div class="modal-body">
                                      <div class="row">
                            <div class="radio radio-single">
                                <input type="radio" id="singleRadio1" value="option1.1" name="radioSingle1" aria-label="Single radio One" checked>
                                   <label>Send a user link that will allow themto choose thier own password</label>
                              </div>
                              <div class="radio radio-single">
                                <input type="radio" id="singleRadio2" value="option2.1" name="radioSingle1"  aria-label="Single radio Two">
                                  <label>Set the user's password as:</label>
                             </div>
                                  <div class="form-group">
                                  <label class="input-title col-xs-12">Confirm Password:</label>
                                  <div class="input-group col-sm-12">
                                <span class="input-group-addon"><i class="fa fa-key"></i></span>
                                <input id="pass1" type="text" parsley-trigger="change" required class="form-control" name="Title" placeholder="8:50 charachters" disabled  >
                              </div>
                                  </div>
                                  <label class="input-title col-xs-12">Confirm Password:</label>
                                <div class="input-group col-sm-12">
                                <span class="input-group-addon"><i class="fa fa-key"></i></span>
                                <input id="pass2" type="text" parsley-trigger="change" required class="form-control" name="Title" placeholder="Confirm Password" disabled >
                              </div>
                                        </div>
                                    </div>
                                     <div class="row">
                                    <div class="col-xs-6">
                                      <button type="submit" class="create btn btn-default waves-effect waves-light">Submit</button>
                                      </div>
                                      <div class="col-xs-6">
                                        <a data-dismiss="modal" class="cancel">Cancel</a>
                                      </div>
                                  </div>
                                  </div>
                                </div>
                              </div>
                        <!--***********/ end change password**********-->
                             <!-- Modal -->
                          <div class="modal fade" id="delete-user" role="dialog">
                            <div class="modal-dialog modal-md">
                              <div class="modal-content">
                                <div class="modal-header">
                                  <button type="button" class="close" data-dismiss="modal">&times;</button>
                                  <h3 class="modal-title">Delete User</h3>
                                </div>
                                <div class="modal-body">
                                    <div class="row">
                                        <p>Are you sure you want to delete the user,<label>username</label>?</p>
                                        <small>the action can't be undone.</small>
                                  <button type="button" class=" btn btn-lg btn-danger col-xs-12 waves-effect waves-light">Yes, delete user</button>

                                    <button type="button" class="delete btn btn-lg btn-default col-xs-12 waves-effect waves-light" data-dismiss="modal">Cancel</button>
                                        </div>
                                </div>

                              </div>
                            </div>
                          </div>
                        </div>
                    </div>
                    <!-- end: page -->



                    <div class="row">
                        <div class="col-xs-4">
                            <button type="button" class="btn btn-default waves-effect waves-light new-user" data-toggle="modal" data-target="#CreateUser"><i class="fa fa-plus-square" aria-hidden="true"></i> Create New User</button>
                        </div>
                        <form action="#" data-parsley-validate novalidate>
                            <div class="modal fade" id="CreateUser" role="dialog">
                                <div class="modal-dialog modal-lg">
                                  <div class="modal-content">
                                    <div class="modal-header">
                                      <button type="button" class="close" data-dismiss="modal">&times;</button>
                                      <h3 class="modal-title">Create User</h3>
                                    </div>
                                      <div class="row">
                                    <div class="modal-body col-sm-12">
                                        <div class="row">
                                        <div class="col-sm-12 col-xs-12 col-lg-6 col-md-6">
                                        <label class="col-sm-12">User Name</label>
                                        <div class="input-group col-sm-12">
                                            <span class="input-group-addon "><i class="glyphicon glyphicon-edit"></i></span>
                                            <input id="userName" type="text" parsley-trigger="change" required class="form-control col-sm-5" name="userName" placeholder="Please enter the user name">
                                          </div>
                                            </div>
                                        <div class="col-sm-12 col-xs-12 col-lg-6 col-md-6">
                                        <label class="col-xs-12 input-title">Display Name</label>
                                        <div class="input-group col-sm-12 col-xs-12 col-lg-12 ">
                                            <span class="input-group-addon" style="height:38px;"><i class="glyphicon glyphicon-edit"></i></span>
                                            <input id="displayname" type="text" parsley-trigger="change" required class="form-control" name="displayname" placeholder="Please enter the display name">
                                          </div>
                                            </div>
                                            </div>
                                        <div class="row">
                                        <div class="col-sm-12 col-xs-12 col-lg-6 col-md-6">
                                        <label class="col-sm-12 input-title">Email</label>
                                        <div class="input-group col-sm-12">
                                            <span class="input-group-addon" ><i class="glyphicon glyphicon-envelope"></i></span>
                                            <input type="email" name="email" parsley-trigger="change" required placeholder="Enter email" class="form-control" id="emailAddress">
                                          </div>
                                            </div>
                                        <div class="col-sm-12 col-xs-12 col-lg-6 col-md-6">
                                        <label class="col-sm-12 input-title">Title</label>
                                        <div class="input-group col-sm-12">
                                            <span class="input-group-addon"><i class="glyphicon glyphicon-edit"></i></span>
                                            <input id="Title" type="text" parsley-trigger="change" required class="form-control" name="Title" placeholder="New User">
                                          </div>
                                            </div>
                                            </div>
                                         <div class='col-sm-12 col-xs-12 col-lg-6 col-md-6'>
                                             <label class="col-sm-12 input-title">Last Sign-in</label>
                                            <div class="form-group col-sm-12 ">
                                                <div class='input-group date' id='datetimepicker1'>
                                                    <span class="input-group-addon">
                                                        <span class="glyphicon glyphicon-calendar"></span>
                                                    </span>
                                                    <input type='text' class="form-control" placeholder="Brand new!" disabled />
                                                </div>
                                            </div>
                                        </div>
                                         <div class='col-sm-12 col-xs-12 col-lg-6 col-md-6'>
                                             <label class="col-sm-12 input-title">Rigestered Since</label>
                                            <div class="form-group col-sm-12">
                                                <div class='input-group date' id='datetimepicker2'>
                                                    <span class="input-group-addon">
                                                        <span class="glyphicon glyphicon-calendar"></span>
                                                    </span>
                                                    <input type='text' class="form-control" placeholder="Unknown" disabled />
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                        <div class="col-sm-12 col-xs-12 col-lg-6 col-md-6">
                                            <label class="col-sm-12 input-title">Locale</label>
                                            <div class="form-group col-sm-12 ">
                                                <div class='input-group'>
                                               <span class="input-group-addon">
                                                        <span class="fa fa-map"></span>
                                                    </span>
                                                <select class="form-control" id="exampleSelect1">
                                                  <option>en_us</option>
                                                  <option>2</option>
                                                  <option>3</option>
                                                  <option>4</option>
                                                  <option>5</option>
                                                </select>
                                              </div>
                                            </div>
                                        </div>
                                        <div class="col-sm-12 col-xs-12 col-lg-6 col-md-6">
                                            <label class="gro col-sm-12 input-title">Groups</label>
                                                    <ul class="list-group col-sm-12 col-xs-12">
                                                      <li class="list-group-item col-sm-12 col-xs-12">
                                                          <span class="col-sm-8 col-xs-8">User</span>
                                                          <div>
                                                          <input type="checkbox" class=" col-sm-2 col-xs-2 user" data-plugin="switchery" data-color="#5d9cec" data-size="small" data-secondary-color="#ED5565" />
                                                          <span class="glyphicon glyphicon-home check-user" ></span>
                                                        </div>
                                                      </li>
                                                      <li class="list-group-item col-sm-12 col-xs-12">
                                                          <span class="col-sm-8 col-xs-8">Adminstritor</span>
                                                          <input type="checkbox" class=" col-sm-2 col-xs-2 admin" data-plugin="switchery" data-color="#5d9cec" data-size="small" data-secondary-color="#ED5565" />
                                                          <span class="glyphicon glyphicon-home check-admin" ></span>
                                                       </li>
                                                      <li class="list-group-item col-sm-12 col-xs-12">
                                                          <span class="col-sm-8 col-xs-8">Zerglings</span>
                                                          <input type="checkbox" class=" col-sm-2 col-xs-2 zerg" data-plugin="switchery" data-color="#5d9cec" data-size="small" data-secondary-color="#ED5565" />
                                                          <span class="glyphicon glyphicon-home check-zerg" ></span>
                                                        </li>

                                                    </ul>
                                        </div>
                                    </div>
                                      </div>
                                  </div>
                                      <div class="row">
                                        <div class="col-xs-6 form-group m-b-0">
                                          <button type="submit" class="create btn btn-default waves-effect waves-light">Create user</button>
                                          </div>
                                          <div class="col-xs-6">
                                            <a data-dismiss="modal" class="cancel">Cancel</a>
                                          </div>
                                      </div>
                                </div>
                              </div>
                    </div>
                        </form>
                </div>
                <!-- end Panel -->
            </div> <!-- container -->

        </div> <!-- content -->

        <footer class="footer">
            Â© 2017. All rights reserved.
        </footer>

    </div>
        
        <!-- ============================================================== -->
        <!-- End Right content here -->
        <!-- ============================================================== -->


        <!-- Right Sidebar -->
        <div class="side-bar right-bar nicescroll">
            <h4 class="text-center">Chat</h4>
            <div class="contact-list nicescroll">
                <ul class="list-group contacts-list">
                    <li class="list-group-item">
                        <a href="#">
                            <div class="avatar">
                                <img src="assets/images/users/avatar-1.jpg" alt="">
                            </div>
                            <span class="name">Chadengle</span>
                            <i class="fa fa-circle online"></i>
                        </a>
                        <span class="clearfix"></span>
                    </li>
                    <li class="list-group-item">
                        <a href="#">
                            <div class="avatar">
                                <img src="assets/images/users/avatar-2.jpg" alt="">
                            </div>
                            <span class="name">Tomaslau</span>
                            <i class="fa fa-circle online"></i>
                        </a>
                        <span class="clearfix"></span>
                    </li>
                    <li class="list-group-item">
                        <a href="#">
                            <div class="avatar">
                                <img src="assets/images/users/avatar-3.jpg" alt="">
                            </div>
                            <span class="name">Stillnotdavid</span>
                            <i class="fa fa-circle online"></i>
                        </a>
                        <span class="clearfix"></span>
                    </li>
                    <li class="list-group-item">
                        <a href="#">
                            <div class="avatar">
                                <img src="assets/images/users/avatar-4.jpg" alt="">
                            </div>
                            <span class="name">Kurafire</span>
                            <i class="fa fa-circle online"></i>
                        </a>
                        <span class="clearfix"></span>
                    </li>
                    <li class="list-group-item">
                        <a href="#">
                            <div class="avatar">
                                <img src="assets/images/users/avatar-5.jpg" alt="">
                            </div>
                            <span class="name">Shahedk</span>
                            <i class="fa fa-circle away"></i>
                        </a>
                        <span class="clearfix"></span>
                    </li>
                    <li class="list-group-item">
                        <a href="#">
                            <div class="avatar">
                                <img src="assets/images/users/avatar-6.jpg" alt="">
                            </div>
                            <span class="name">Adhamdannaway</span>
                            <i class="fa fa-circle away"></i>
                        </a>
                        <span class="clearfix"></span>
                    </li>
                    <li class="list-group-item">
                        <a href="#">
                            <div class="avatar">
                                <img src="assets/images/users/avatar-7.jpg" alt="">
                            </div>
                            <span class="name">Ok</span>
                            <i class="fa fa-circle away"></i>
                        </a>
                        <span class="clearfix"></span>
                    </li>
                    <li class="list-group-item">
                        <a href="#">
                            <div class="avatar">
                                <img src="assets/images/users/avatar-8.jpg" alt="">
                            </div>
                            <span class="name">Arashasghari</span>
                            <i class="fa fa-circle offline"></i>
                        </a>
                        <span class="clearfix"></span>
                    </li>
                    <li class="list-group-item">
                        <a href="#">
                            <div class="avatar">
                                <img src="assets/images/users/avatar-9.jpg" alt="">
                            </div>
                            <span class="name">Joshaustin</span>
                            <i class="fa fa-circle offline"></i>
                        </a>
                        <span class="clearfix"></span>
                    </li>
                    <li class="list-group-item">
                        <a href="#">
                            <div class="avatar">
                                <img src="assets/images/users/avatar-10.jpg" alt="">
                            </div>
                            <span class="name">Sortino</span>
                            <i class="fa fa-circle offline"></i>
                        </a>
                        <span class="clearfix"></span>
                    </li>
                </ul>  
            </div>
        </div>
        <!-- /Right-bar -->
                        


        </div>
{% endblock %}
{% block page_scripts %}
        <!-- Include JS snippets -->
        {% include 'components/common/js-snippets/user-table-columns.twig' %}
        
        <script>
            // These options get set by Twig when the page is rendered
            var paginate_server_side = {{ paginate_server_side | default("false") }};
            var primary_group = "{{ primary_group_name | default(null) }}";
            var table_id = "table-users";
            
            $(document).ready(function() {
                
                // Callback for generating the AJAX url
                function ajaxGenerateUrlCallback(table, url) {
                    var table_state = getTableStateVars(table);
                    $.extend(table.config.pager.ajaxObject.data, table_state);
                    // Limit to a particular primary group
                    if (primary_group) {
                        table.config.pager.ajaxObject.data.primary_group = primary_group;
                    }
                    return url;
                }
            
                // Callback for processing data returned from API
                function ajaxProcessingCallback(data) {
                    var $table = $(this);
                    if (data) {
                        //console.log(data);
                        var col, row, txt,
                            // make # column show correct value
                            index = $('#' + table_id)[0].config.pager.page,
                            json = {},
                            rows = '';
                        size = data['rows'].length;
                        // Render table cells via Handlebars
                        var template_0 = Handlebars.compile($("#user-table-column-info").html());
                        var template_1 = Handlebars.compile($("#user-table-column-registered-since").html());
                        var template_2 = Handlebars.compile($("#user-table-column-last-sign-in").html());
                        var template_3 = Handlebars.compile($("#user-table-column-actions").html());
                        for (row = 0; row < size; row++){
                            rows += '<tr>';
                            var cell_data = {
                                "user" : data['rows'][ row ],       // It is safe to use the data from the API because Handlebars escapes HTML
                                "site" : site
                            };
                            rows += template_0(cell_data);
                            rows += template_1(cell_data);
                            rows += template_2(cell_data);
                            rows += template_3(cell_data);
                            rows += '</tr>';
                        }
                        json.total = data['count'];  // Get total rows without pagination
                        json.filteredRows = data['count_filtered']; // no filtering
                        json.rows = $(rows);
                        return json;
                    }
                }  
                
                function ajaxSetupCallback() {
                    if (paginate_server_side) {
                        var ajax_pager_options = {
                            ajaxUrl: site['uri']['public'] + "/api/users?",
                            // Generate the URL for the AJAX request, with the relevant parameters
                            customAjaxUrl: ajaxGenerateUrlCallback,
                            ajaxObject: {
                                data: {
                                    // rows   : size, // this doesn't work because size can't be updated dynamically 
                                }
                            },
                            ajaxProcessing: ajaxProcessingCallback              
                        };
                        return ajax_pager_options;
                    } else {
                        return {};
                    }
                }
                
                function pagerCompleteCallback() {
                    // Link row buttons
                    if (paginate_server_side) {
                        bindUserTableButtons($('#' + table_id));
                    }
                    // Link CSV download button
                    $("#table-users-download").on("click", function (){
                        var state = getTableStateVars($('#' + table_id)[0]);
                        state['format'] = "csv";
                        delete state['page'];
                        delete state['size'];
                        if (primary_group)
                            state['primary_group'] = primary_group;       
                        var url = site['uri']['public'] + "/api/users?" + $.param( state );
                        window.location = url;
                    });
                }
                
                ufTable('table-users', ajaxSetupCallback, pagerCompleteCallback);
            });
        </script>
    
{% endblock %}

